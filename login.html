<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'> <!-- CDN to get box icons-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--CDN to get social media buttons-->

<div class="background-container">
    <div class="wrapper">
        <form id="loginForm">
            <h1>Login</h1>
            <div class="input-box">
                <input type="text" id="email" placeholder="Email" required>
                <i class="bx bxs-user"></i>
            </div>

            <div class="input-box">
                <input type="password" id="password" placeholder="Password" required>
                <i class="bx bxs-lock-alt"></i>
            </div>

            <button class="btn" type="button" onclick="validateUser()">Login</button>

            <div class="register-link">
                <p>Don't have an account? <a href="register.html">Register</a></p> <!-- Input sign up page reference -->
                <br>
                <p id = "loginError" style = "color:red; text-align:center"></p>
            </div>
        </form>
    </div>
</div>
</div>

<script>
    function validateUser() {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

        var xhr = new XMLHttpRequest();

        // Set the request URL
        var url = "http://127.0.0.1:5000/login"; // Update the URL to match the app route

        // Set the request method to POST
        xhr.open("POST", url, true);

        // Set the request headers
        xhr.setRequestHeader("Content-Type", "application/json");

        // Create a data object with the user's inputted email and password
        var data = {
            email: email,
            password: password
        };

        // Convert the data object to JSON
        var jsonData = JSON.stringify(data);

        // Set the callback function for when the request is complete
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4 && xhr.status === 200) {
                // Request successful, handle the response here
                var response = JSON.parse(xhr.responseText);
                // Redirect the user to index.html
                window.location.href = "index.html";
            } else if (xhr.readyState === 4 && xhr.status !== 200) {
                // Request failed, handle the error here
                document.getElementById('loginError').innerText = "Username or Password is incorrect!";
            }
        };

        // Send the request with the JSON data
        xhr.send(jsonData);
    }
</script>

<style scoped>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }
    
    
    .background-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background: url(ecommerce.jpg) no-repeat; 
        background-size: cover;
        background-position: center;
    }
    
    .wrapper{
        width: 420px;
        background:transparent;
        border: 2px solid black; 
        backdrop-filter: blur(15px); 
        color: black;
        border-radius: 10px;
        padding: 30px 40px;
    }
    
    .wrapper h1{
        font-size: 36px;
        text-align: center;
    }
    
    .wrapper .input-box{
        position: relative;
        width: 100%;
        height: 50px;
        margin: 30px 0;
    }
    
    .input-box input{
        width: 100%;
        height: 100%;
        background: white;
        border: none;
        outline: none;
        border: 2px solid black;
        border-radius: 40px;
        font-size: 16px;
        color: black;
        padding: 20px 45px 20px 20px;
    }
    
    
    .input-box input::placeholder{
        color: black;
    }
    
    .input-box i {
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
    }
    
    .wrapper .btn{
        width: 100%;
        height: 45px;
        background: white;
        border: 2px solid black;
        outline: none;
        border-radius: 40px;
        box-shadow: 0 0 10px rgba(0,0,0, .3);
        cursor: pointer;
        font-size: 16px;
        color: black;
        font-weight: 600;
    }
    
    .btn:hover{
        background: white;
    }
    
    .wrapper .register-link{
        font-size: 14.5px;
        text-align: center;
        margin: 20px 0 15px;
    }
    
    .register-link p a {
        color: darkblue;
        text-decoration: none;
        font-weight: 600;
    }
    
    .register p a:hover{
        text-decoration: underline;
    }
    
    .wrapper .login-via{
        text-align: center;
        font-weight: 600;
    }
    
    .wrapper .login-via p {
        margin-top: 20px;
    }
    
    .social-icons{
        display: flex;
        width: 100%;
        padding-bottom: 5px;
    }
    
    .social-icon{
        display: flex;
        justify-content: space-between;
        width:150px;
        height:50px;
        margin:auto;
    } 
    
    .fa {
        padding: 11px;
        font-size: 30px;
        width: 35px;
        text-decoration: none;
        border-radius: 50%;
        cursor: pointer;
        margin-top: 10px;
        
      }
    
    .fa:hover {
        opacity: 0.7;
      }
    
    .fa-facebook {
        background: #3B5998;
        color: white;
      }
    
    .fa-twitter {
        background: #55ACEE;
        color: white;
      }
    
    .fa-google {
        background: #dd4b39;
        color: white;
      }
    
    .match{
        margin-bottom: 15px;
        font-weight: 600;
        text-align:center;
    }
    </style>